<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
  * {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body { padding: 12px; background: #f3f2f1; }
  .filter-bar {
    display: flex; flex-wrap: wrap; gap: 10px;
    align-items: flex-end;
  }
  .filter-group { display: flex; flex-direction: column; gap: 3px; }
  .filter-group label {
    font-size: 11px; font-weight: 600; color: #605e5c;
    text-transform: uppercase; letter-spacing: 0.5px;
  }
  .filter-group select, .filter-group input {
    padding: 6px 8px; border: 1px solid #8a8886; border-radius: 4px;
    font-size: 13px; background: #fff; min-width: 150px;
  }
  .filter-group select:focus, .filter-group input:focus {
    border-color: #0078d4; outline: none;
  }
  .btn {
    padding: 7px 16px; border: none; border-radius: 4px;
    font-size: 13px; font-weight: 600; cursor: pointer; height: 32px;
  }
  .btn-primary { background: #0078d4; color: #fff; }
  .btn-primary:hover { background: #106ebe; }
  .btn-clear { background: #fff; color: #323130; border: 1px solid #8a8886; }
  .btn-clear:hover { background: #edebe9; }
</style>
</head>
<body>

<div class="filter-bar">
  <div class="filter-group">
    <label>Customer</label>
    <input type="text" id="fCustomer" placeholder="Customer name..." />
  </div>
  <div class="filter-group">
    <label>Decision</label>
    <select id="fDecision">
      <option value="">All</option>
      <option value="Approved">Approved</option>
      <option value="Denied">Denied</option>
      <option value="Pending">Pending</option>
    </select>
  </div>
  <div class="filter-group">
    <label>Status</label>
    <select id="fStatus">
      <option value="">All</option>
      <option value="Open">Open</option>
      <option value="Closed">Closed</option>
      <option value="In Review">In Review</option>
    </select>
  </div>
  <div class="filter-group">
    <label>RMA / Part #</label>
    <input type="text" id="fSearch" placeholder="Search..." />
  </div>
  <button class="btn btn-primary" onclick="applyFilter()">Apply Filters</button>
  <button class="btn btn-clear" onclick="clearFilter()">Clear</button>
</div>

<script>
  // ============================================================
  // CONFIGURATION â€” UPDATE THIS
  // ============================================================
  const DASHBOARD_PAGE_URL = 'https://pdidiesel.sharepoint.com/sites/WarrantyApp/SitePages/WarrantyDash.aspx';

  function applyFilter() {
    let params = [];
    let filterIndex = 1;

    const customer = document.getElementById('fCustomer').value.trim();
    const decision = document.getElementById('fDecision').value;
    const status   = document.getElementById('fStatus').value;
    const search   = document.getElementById('fSearch').value.trim();

    if (customer) {
      params.push(`FilterField${filterIndex}=Customer_Name`);
      params.push(`FilterValue${filterIndex}=${encodeURIComponent(customer)}`);
      params.push(`FilterType${filterIndex}=Text`);
      filterIndex++;
    }
    if (decision) {
      params.push(`FilterField${filterIndex}=Decision`);
      params.push(`FilterValue${filterIndex}=${encodeURIComponent(decision)}`);
      params.push(`FilterType${filterIndex}=Text`);
      filterIndex++;
    }
    if (status) {
      params.push(`FilterField${filterIndex}=Status`);
      params.push(`FilterValue${filterIndex}=${encodeURIComponent(status)}`);
      params.push(`FilterType${filterIndex}=Text`);
      filterIndex++;
    }

    const url = params.length > 0 
      ? DASHBOARD_PAGE_URL + '?' + params.join('&')
      : DASHBOARD_PAGE_URL;

    // Navigate the parent SharePoint page
    window.top.location.href = url;
  }

  function clearFilter() {
    window.top.location.href = DASHBOARD_PAGE_URL;
  }
</script>
</body>
</html>
